{"version":3,"sources":["../../../server/config/db.js"],"names":["DB_PASS","DB_USER","DB_HOST","DB_PORT","DB_NAME","process","env","connectionUrl","Promise","global","connect","then","db","connection","on","console","error","bind","catch","err","log","exit"],"mappings":";;;;;;AAAA;;;;;;AAEA,MAAM;AACFA,WADE;AAEFC,WAFE;AAGFC,WAHE;AAIFC,WAJE;AAKFC;AALE,IAMFC,QAAQC,GANZ;;AAQA,MAAMC,gBAAiB,aAAYN,OAAQ,IAAGD,OAAQ,IAAGE,OAAQ,IAAGC,OAAQ,IAAGC,OAAQ,EAAvF;;AAEA;AACA,mBAASI,OAAT,GAAmBC,OAAOD,OAA1B;;kBAEe,MAAM,mBAASE,OAAT,CAAiBH,aAAjB,EAChBI,IADgB,CACX,MAAM;AACR;AACA,UAAMC,KAAK,mBAASC,UAApB;;AAEA;AACAD,OAAGE,EAAH,CAAM,OAAN,EAAeC,QAAQC,KAAR,CAAcC,IAAd,CAAmBF,OAAnB,EAA4B,2BAA5B,CAAf;AACA,WAAOH,EAAP;AACH,CARgB,EAShBM,KATgB,CASVC,OAAO;AACV;AACAJ,YAAQK,GAAR,CAAYD,GAAZ,EAFU,CAEQ;AAClBd,YAAQgB,IAAR,CAAa,CAAC,CAAd,EAHU,CAGQ;AACrB,CAbgB,C","file":"db.js","sourcesContent":["import mongoose from 'mongoose';\n\nconst {\n    DB_PASS,\n    DB_USER,\n    DB_HOST,\n    DB_PORT,\n    DB_NAME\n} = process.env;\n\nconst connectionUrl = `mongodb://${DB_USER}:${DB_PASS}@${DB_HOST}:${DB_PORT}/${DB_NAME}`;\n\n// Get Mongoose to use the global promise library\nmongoose.Promise = global.Promise;\n\nexport default () => mongoose.connect(connectionUrl)\n    .then(() => {\n        // Get the default connection\n        const db = mongoose.connection;\n\n        // Bind connection to 'error' event (to get notification of connection errors)\n        db.on('error', console.error.bind(console, 'MongoDB connection error:'));\n        return db;\n    })\n    .catch(err => {\n        // We were unable to connect! Oh no!\n        console.log(err); // let's log the error\n        process.exit(-1); // and get the current process to exit\n    });"]}